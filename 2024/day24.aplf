 p1←day24 input
 (z g)←(×∘≢¨⊆⊢)⊃⎕NGET input 1
 g←{(¯1↑x),⍨3↑x←' '(≠⊆⊢)⍵}¨g
 u←(⊂∘⍋⌷⊢)∪⊃,/g
 op←3↑u ⋄ w←3↓u
 p←':'(≠⊆⊢)¨z
 z←(⍎¨(⊃⌽)¨p)@(w⍳⊃¨p)⊢¯1⍴⍨≢w
 o←op⍳2∘⊃¨g
 m←o,¨w∘⍳¨(⊂1 3 4)∘⌷¨g
 F←{
     (a x y r)←⍺
     ∨/¯1=xy←⍵[x y]:¯1
     a=1:∧/xy ⋄ a=2:∨/xy ⋄ a=3:≠/xy
 }
 p1←2⊥⌽('z'=⊃¨w)/{(F∘⍵¨m)@(⊢/¨m)⊢⍵}⍣≡⊢z
